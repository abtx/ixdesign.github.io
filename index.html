<!DOCTYPE html>
<html>
  <head>
    <title>ix desgin</title>
    <link rel="icon" type="image/png" href="public/images/favicon.png">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="stylesheet" href="public/styles/index.css">
    <link rel="stylesheet" href="public/styles/des_and_dev.css">
  </head>
  <body>
    <header>
      <div>
        <div class="logo"></div>
        <div class="contact"><a href="mailto:hello@ix-design.uk" target="_blank">Get in touch</a></div>
      </div>
    </header>
    <!--  data-aos-delay="100" data-aos="fade-up" data-aos-easing="ease-out-cubic" data-aos-duration="600" -->
    <section id="introduction">
      <section id="illustration"></section>
      <section id="description">
        <h1>Designing Cutting Edge Interfaces</h1>
        <p>With over 4 years of experience working with <b>big data companies and start-ups</b>, my expertise spans from conducting user and business research and analysis, User Experience design &amp; development, wireframing, prototyping, data visualisation, and delivering production ready frontend code. I specialize in <b>modern JavaScript frameworks</b> that allow us to create fast and responsive single-page applications. </br>
        With a great focus on UX and UI, I code my designs and work on frontend. For projects that require thorough backend expertise I'm ready to help with outsourcing.
        </p>
        <a href="mailto:hello@ix-design.uk" target="_blank"><div class="contact"><span>Get in touch about <b>UX + UI design</b></span></div></a>
      </section>
    </section>
    <section id="core_values" class="section_padding">
      <div class="card">
        <i class="analyze"></i>
        <h2>Understanding Your Business</h2>
        <p>Understanding yours and your clients needs is paramount to my work. I'm all about user-driven design and development.</p>
      </div>
      <div class="card">
        <i class="chat"></i>
        <h2>Communication</h2>
        <p>Get regular updates via Slack, Jira, and other tracking systems. Also, well documented code and styleguides.</p>
      </div>
      <div class="card">
        <i class="tasks"></i>
        <h2>Process</h2>
        <p>From pen and paper sketches to fully fledged hi-fi wireframes and designs, I'll translate my designs to production ready code.</p>
      </div>
      <div class="card">
        <i class="briefcase"></i>
        <h2>Technology</h2>
        <p>I use modern design and frontend frameworks, industry standard tooling.</p>
      </div>
    </section>

    <section id="des_and_dev" class="section_padding">
      <h1>Design &amp; Development</h1>
      <p>As a design &amp; user centered comapny, I use design thinking and technical skills to solve problems around your business needs in proven but creative ways.</br>
      The experience designing and engineering frontend interfaces translates to exceptional UX and digital products that are not only intuitive to use, but look great too.</p>

      <svg width="100%" height="700" font-size="12" text-anchor="middle"></svg>

    </section>

    <section id="people" class="section_padding">
      <div>
        <h1>People, <span>Edinburgh</span></h1>
        <div class="person_card">
          <i id="artur"></i>
          <div class="body">
            <div class="name">
              Artur Janas
            </div>
            <div class="role">
              UX &amp; UI Designer and Developer
            </div>
            <div class="description">
              I'm a problem solver and I love using technology as a tool to achieve that. I'm passionate about anything design and I love implementing my solutions in code. Seeing how my work helps users and clients achieve what they want and leaving them with an experience they want to come back to is why I do what I do. I started IX Design to work on exciting and exceptional projects and take on new challenges.
            </div>
            <ul class="links">
              <li><a href="https://uk.linkedin.com/in/artur-janas-b2b78747" target="_blank">LinkedIn</a></li>
              <li><a href="https://github.com/abtx" target="_blank">Github</a></li>
              <li><a href="http://arturjanas.co.uk" target="_blank">Website</a></li>
            </ul>
          </div>
        </div>
      </div>
      <!-- <div>
        <h1>Partners, <span>Edinburgh</span></h1>
        <div class="person_card">
          <i id="aleks"></i>
          <div class="body">
            <div class="name">
              Aleks Wruk
            </div>
            <div class="role">
              UX &amp; bussiness researcher
            </div>
            <div class="description">
              Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
            </div>
            <ul class="links">
              <li><a href="#">LinkedIn</a></li>
              <li><a href="#">Medium</a></li>
              <li><a href="#">Behance</a></li>
            </ul>
          </div>
        </div>
      </div> -->
    </section>

    <section id="contact" class="section_padding">
      <h1><span class="light_font">Ready to move things forward?</span> Say hello.</h1>
      <div>
        <a href="mailto:hello@ix-design.uk" target="_blank">hello@ix-design.uk</a>
        <div class="trail"></div>
      </div>
    </section>

    <footer class="section_padding">
      <div class="logo"></div>
      <div>&copy; ix design uk ltd, 2017</div>
    </footer>

  </body>

  <script src="js/d3.min.js"></script>
  <script src="js/d3-legend.min.js"></script>
  <script src="js/tech.js"></script>

  <script>
    let svg = d3.select('svg');
    let width = document.body.clientWidth; // get width in pixels
    let height = +svg.attr('height');
    let centerX = width * 0.5;
    let centerY = height * 0.5;
    let strength = 0.05;
    let focusedNode;

    let format = d3.format(',d');

    // let scaleColor = d3.scaleOrdinal(d3.schemeCategory20c);
    let scaleColor =  d3.scaleOrdinal(['#FE8313', '#FF6D6D', '#077EFF', '#FFBB00', '#7ED321', '#71B5FF', '#2CE0D4', '#9013FE' ]);

    // use pack to calculate radius of the circle
    let pack = d3.pack()
      .size([width , height])
      .padding(22.5);

    let forceCollide = d3.forceCollide(d => d.r + 1);

    // use the force
    let simulation = d3.forceSimulation()
      // .force('link', d3.forceLink().id(d => d.id))
      .force('charge', d3.forceManyBody())
      .force('collide', forceCollide)
      // .force('center', d3.forceCenter(centerX, centerY))
      .force('x', d3.forceX(centerX ).strength(strength))
      .force('y', d3.forceY(centerY ).strength(strength));

    // reduce number of circles on mobile screen due to slow computation
    if ('matchMedia' in window && window.matchMedia('(max-device-width: 767px)').matches) {
      data = data.filter(el => {
        return el.value >= 50;
      });
    }

    let root = d3.hierarchy({ children: data })
      .sum(d => d.value);

    // we use pack() to automatically calculate radius conveniently only
    // and get only the leaves
    let nodes = pack(root).leaves().map(node => {
      const data = node.data;
      return {
        x: centerX + (node.x - centerX) * 3, // magnify start position to have transition to center movement
        y: centerY + (node.y - centerY) * 3,
        r: 0, // for tweening
        radius: node.r, //original radius
        id: data.cat + '.' + (data.name.replace(/\s/g, '-')),
        cat: data.cat,
        name: data.name,
        value: data.value,
        icon: data.icon,
        desc: data.desc,
      }
    });
    simulation.nodes(nodes).on('tick', ticked);

    let node = svg.selectAll('.node')
      .data(nodes)
      .enter().append('g')
      .attr('class', 'node')
      .call(d3.drag()
        .on('start', (d) => {
          if (!d3.event.active) simulation.alphaTarget(0.2).restart();
          d.fx = d.x;
          d.fy = d.y;
        })
        .on('drag', (d) => {
          d.fx = d3.event.x;
          d.fy = d3.event.y;
        })
        .on('end', (d) => {
          if (!d3.event.active) simulation.alphaTarget(0);
          d.fx = null;
          d.fy = null;
        }));

    node.append('circle')
      .attr('id', d => d.id)
      .attr('r', 0)
      .style('fill', d => scaleColor(d.cat))
      .transition().duration(400).ease(d3.easeElasticOut)
        .tween('circleIn', (d) => {
          let i = d3.interpolateNumber(0, d.radius);
          return (t) => {
            d.r = i(t);
            simulation.force('collide', forceCollide);
          }
        })

    node.append('clipPath')
      .attr('id', d => `clip-${d.id}`)
      .append('use')
      .attr('xlink:href', d => `#${d.id}`);

    // display text as circle icon
    node.filter(d => !String(d.icon).includes('public/images/logos/'))
      .append('text')
      .classed('node-icon', true)
      .attr('clip-path', d => `url(#clip-${d.id})`)
      .selectAll('tspan')
      .data(d => d.icon.split(';'))
      .enter()
        .append('tspan')
        .attr('x', 0)
        .attr('y', (d, i, nodes) => (13 + (i - nodes.length / 2 - 0.5) * 10))
        .text(name => name);

    // display image as circle icon
    node.filter(d => String(d.icon).includes('public/images/logos/'))
      .append('image')
      .classed('node-icon', true)
      .attr('clip-path', d => `url(#clip-${d.id})`)
      .attr('xlink:href', d => d.icon)
      .attr('x', d => - d.radius * 0.7)
      .attr('y', d => - d.radius * 0.7)
      .attr('height', d => d.radius * 2 * 0.7)
      .attr('width', d => d.radius * 2 * 0.7)

    node.append('title')
      .text(d => (d.cat + '::' + d.name + '\n' + format(d.value)));

    let legendOrdinal = d3.legendColor()
      .scale(scaleColor)
      .shape('circle')
      .shapePadding(10);

    let legend = svg.append('g')
      .classed('legend-color', true)
      .attr('text-anchor', 'start')
      .attr('transform','translate(10,50)')
      .style('font-size','12px')
      .call(legendOrdinal);

    let sizeScale = d3.scaleOrdinal()
        .domain(['less use', 'more use'])
        .range([5, 10] );

    let legendSize = d3.legendSize()
      .scale(sizeScale)
      .shape('circle')
      .shapePadding(10)
      .labelAlign('end');

    let legend2 = svg.append('g')
      .classed('legend-size', true)
      .attr('text-anchor', 'start')
      .attr('transform', 'translate(150, 45)')
      .style('font-size', '12px')
      .call(legendSize);


    /*
    <foreignObject class="circle-overlay" x="10" y="10" width="100" height="150">
      <div class="circle-overlay__inner">
        <h2 class="circle-overlay__title">ReactJS</h2>
        <p class="circle-overlay__body">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ullam, sunt, aspernatur. Autem repudiandae, laboriosam. Nulla quidem nihil aperiam dolorem repellendus pariatur, quaerat sed eligendi inventore ipsa natus fugiat soluta doloremque!</p>
      </div>
    </foreignObject>
    */
    let infoBox = node.append('foreignObject')
      .classed('circle-overlay hidden', true)
      .attr('x', -350 * 0.5 * 0.8)
      .attr('y', -350 * 0.5 * 0.8)
      .attr('height', 350 * 0.8)
      .attr('width', 350 * 0.8)
        .append('xhtml:div')
        .classed('circle-overlay__inner', true);

    infoBox.append('h2')
      .classed('circle-overlay__title', true)
      .text(d => d.name);

    infoBox.append('p')
      .classed('circle-overlay__body', true)
      .html(d => d.desc);


    node.on('click', (currentNode) => {
      d3.event.stopPropagation();
      let currentTarget = d3.event.currentTarget; // the <g> el

      if (currentNode === focusedNode) {
        // no focusedNode or same focused node is clicked
        return;
      }
      let lastNode = focusedNode;
      focusedNode = currentNode;

      simulation.alphaTarget(0.2).restart();
      // hide all circle-overlay
      d3.selectAll('.circle-overlay').classed('hidden', true);
      d3.selectAll('.node-icon').classed('node-icon--faded', false);

      // don't fix last node to center anymore
      if (lastNode) {
        lastNode.fx = null;
        lastNode.fy = null;
        node.filter((d, i) => i === lastNode.index)
          .transition().duration(400).ease(d3.easePolyOut)
          .tween('circleOut', () => {
            let irl = d3.interpolateNumber(lastNode.r, lastNode.radius);
            return (t) => {
              lastNode.r = irl(t);
            }
          })
          .on('interrupt', () => {
            lastNode.r = lastNode.radius;
          });
      }

      // if (!d3.event.active) simulation.alphaTarget(0.5).restart();

    d3.transition().duration(400).ease(d3.easePolyOut)
        .tween('moveIn', () => {
          let ix = d3.interpolateNumber(currentNode.x, centerX);
          let iy = d3.interpolateNumber(currentNode.y, centerY);
          let ir = d3.interpolateNumber(currentNode.r, centerY * 0.5);
          return function (t) {
            // console.log('i', ix(t), iy(t));
            currentNode.fx = ix(t);
            currentNode.fy = iy(t);
            currentNode.r = ir(t);
            simulation.force('collide', forceCollide);
          };
        })
        .on('end', () => {
          simulation.alphaTarget(0);
          let $currentGroup = d3.select(currentTarget);
          $currentGroup.select('.circle-overlay')
            .classed('hidden', false);
          $currentGroup.select('.node-icon')
            .classed('node-icon--faded', true);

        })
        .on('interrupt', () => {
          currentNode.fx = null;
          currentNode.fy = null;
          simulation.alphaTarget(0);
        });

    });

    // blur
    d3.select(document).on('click', () => {
      let target = d3.event.target;
      // check if click on document but not on the circle overlay
      if (!target.closest('#circle-overlay') && focusedNode) {
        focusedNode.fx = null;
        focusedNode.fy = null;
        simulation.alphaTarget(0.2).restart();
        d3.transition().duration(400).ease(d3.easePolyOut)
          .tween('moveOut', function () {
            console.log('tweenMoveOut', focusedNode);
            let ir = d3.interpolateNumber(focusedNode.r, focusedNode.radius);
            return function (t) {
              focusedNode.r = ir(t);
              simulation.force('collide', forceCollide);
            };
          })
          .on('end', () => {
            focusedNode = null;
            simulation.alphaTarget(0);
          })
          .on('interrupt', () => {
            simulation.alphaTarget(0);
          });

        // hide all circle-overlay
        d3.selectAll('.circle-overlay').classed('hidden', true);
        d3.selectAll('.node-icon').classed('node-icon--faded', false);
      }
    });

    function ticked() {
      node
        .attr('transform', d => `translate(${d.x},${d.y})`)
        .select('circle')
          .attr('r', d => d.r);
    }
  </script>
</html>
